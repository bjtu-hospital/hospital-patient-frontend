# æ‚£è€…ç«¯å¾…å®ç°æ¥å£æ–‡æ¡£ - å°±è¯Šäººç®¡ç†å’Œé¢„çº¦åŠŸèƒ½

## ğŸ“‹ æ¥å£å®ç°çŠ¶æ€æ€»è§ˆï¼ˆåŸºäº Swagger æ–‡æ¡£ï¼‰

### âœ… å·²å®ç°çš„æ¥å£ï¼ˆ3ä¸ªï¼‰
- `POST /patient/appointments` - åˆ›å»ºé¢„çº¦ï¼ˆâš ï¸ å­˜åœ¨Tokenè®¤è¯é—®é¢˜ï¼‰
- `GET /patient/appointments` - è·å–é¢„çº¦åˆ—è¡¨
- `PUT /patient/appointments/{appointmentId}/cancel` - å–æ¶ˆé¢„çº¦

### âŒ å¾…å®ç°çš„æ¥å£ï¼ˆ6ä¸ªï¼‰

**å°±è¯Šäººç®¡ç†ï¼ˆ5ä¸ªï¼‰ï¼š**
- `GET /patient/patients` - è·å–å°±è¯Šäººåˆ—è¡¨
- `POST /patient/patients` - æ·»åŠ å°±è¯Šäºº
- `PUT /patient/patients/{patient_id}` - æ›´æ–°å°±è¯Šäºº
- `DELETE /patient/patients/{patient_id}` - åˆ é™¤å°±è¯Šäºº
- `PUT /patient/patients/{patient_id}/set-default` - è®¾ç½®é»˜è®¤å°±è¯Šäºº

**é¢„çº¦ç®¡ç†ï¼ˆ1ä¸ªï¼‰ï¼š**
- `GET /patient/appointments/{appointmentId}` - é¢„çº¦è¯¦æƒ…

### âš ï¸ éœ€è¦ä¿®å¤çš„é—®é¢˜

**åˆ›å»ºé¢„çº¦æ¥å£ Token è®¤è¯å¤±è´¥ï¼š**
- æ¥å£è·¯å¾„ï¼š`POST /patient/appointments`
- é”™è¯¯ä¿¡æ¯ï¼š`{code: 105, message: 'Token æ— æ•ˆæˆ–å·²å¤±æ•ˆ'}`
- é—®é¢˜ï¼šæ¥å£å·²å­˜åœ¨ä½† Token è®¤è¯é€»è¾‘æœ‰é—®é¢˜
- éœ€è¦åç«¯æ£€æŸ¥æ‚£è€…ç™»å½•åçš„ Token æ˜¯å¦æœ‰è®¿é—®è¯¥æ¥å£çš„æƒé™

---

## ä¸€ã€å°±è¯Šäººç®¡ç†æ¥å£

### 1.1 è·å–å°±è¯Šäººåˆ—è¡¨

**æ¥å£è·¯å¾„ï¼š** `GET /patient/patients`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
```

**è¯·æ±‚å‚æ•°ï¼š** æ— 

**è¿”å›æ ¼å¼ï¼š**
```json
{
  "code": 0,
  "message": {
    "patients": [
      {
        "patient_id": 1,
        "name": "å¼ ä¸‰",
        "id_card": "110101199001011234",
        "phone": "13800138000",
        "relation": "æœ¬äºº",
        "is_default": true,
        "created_at": "2025-11-30T10:00:00"
      },
      {
        "patient_id": 2,
        "name": "æå››",
        "id_card": "110101199501015678",
        "phone": "13900139000",
        "relation": "çˆ¶äº²",
        "is_default": false,
        "created_at": "2025-11-30T11:00:00"
      }
    ]
  }
}
```

**å­—æ®µè¯´æ˜ï¼š**
- `patient_id`: å°±è¯ŠäººIDï¼ˆå¿…éœ€ï¼‰
- `name`: å§“åï¼ˆå¿…éœ€ï¼‰
- `id_card`: èº«ä»½è¯å·ï¼ˆå¿…éœ€ï¼‰
- `phone`: æ‰‹æœºå·ï¼ˆå¿…éœ€ï¼‰
- `relation`: ä¸æ‚£è€…å…³ç³»ï¼ˆæœ¬äºº/çˆ¶äº²/æ¯äº²/å­å¥³/é…å¶/å…¶ä»–ï¼‰
- `is_default`: æ˜¯å¦ä¸ºé»˜è®¤å°±è¯Šäºº
- `created_at`: åˆ›å»ºæ—¶é—´

---

### 1.2 æ·»åŠ å°±è¯Šäºº

**æ¥å£è·¯å¾„ï¼š** `POST /patient/patients`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "name": "å¼ ä¸‰",
  "id_card": "110101199001011234",
  "phone": "13800138000",
  "relation": "æœ¬äºº"
}
```

**è¿”å›æ ¼å¼ï¼š**
```json
{
  "code": 0,
  "message": {
    "patient_id": 1,
    "message": "æ·»åŠ å°±è¯ŠäººæˆåŠŸ"
  }
}
```

---

### 1.3 æ›´æ–°å°±è¯Šäºº

**æ¥å£è·¯å¾„ï¼š** `PUT /patient/patients/{patient_id}`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
Content-Type: application/json
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "name": "å¼ ä¸‰",
  "id_card": "110101199001011234",
  "phone": "13800138000",
  "relation": "æœ¬äºº"
}
```

**è¿”å›æ ¼å¼ï¼š**
```json
{
  "code": 0,
  "message": "æ›´æ–°æˆåŠŸ"
}
```

---

### 1.4 åˆ é™¤å°±è¯Šäºº

**æ¥å£è·¯å¾„ï¼š** `DELETE /patient/patients/{patient_id}`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
```

**è¿”å›æ ¼å¼ï¼š**
```json
{
  "code": 0,
  "message": "åˆ é™¤æˆåŠŸ"
}
```

---

### 1.5 è®¾ç½®é»˜è®¤å°±è¯Šäºº

**æ¥å£è·¯å¾„ï¼š** `PUT /patient/patients/{patient_id}/set-default`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
```

**è¿”å›æ ¼å¼ï¼š**
```json
{
  "code": 0,
  "message": "è®¾ç½®æˆåŠŸ"
}
```

---

## äºŒã€é¢„çº¦è¯¦æƒ…æ¥å£

### 2.1 é¢„çº¦è¯¦æƒ…

**æ¥å£è·¯å¾„ï¼š** `GET /patient/appointments/{appointmentId}`



**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
```

**è¿”å›æ ¼å¼ï¼š**
```json
{
  "code": 0,
  "message": {
    "id": 12345,
    "orderNo": "202511301234567890",
    "hospitalId": 2,
    "hospitalName": "åŒ—äº¬å¤§å­¦ç¬¬ä¸‰åŒ»é™¢æœ¬éƒ¨",
    "hospitalAddress": "åŒ—äº¬å¸‚æµ·æ·€åŒºèŠ±å›­åŒ—è·¯49å·",
    "departmentId": 1,
    "departmentName": "å¿ƒè¡€ç®¡å†…ç§‘",
    "doctorId": 13,
    "doctorName": "å¼ æ°¸ç",
    "doctorTitle": "æ•™æˆã€ä¸»ä»»åŒ»å¸ˆ",
    "patientId": 1,
    "patientName": "å¼ ä¸‰",
    "patientPhone": "13800138000",
    "appointmentDate": "2025-11-30",
    "appointmentTime": "ä¸Šåˆ 08:00-12:00",
    "queueNumber": 15,
    "price": 300.00,
    "symptoms": "å¤´ç—›å‘çƒ­",
    "status": "pending",
    "paymentStatus": "paid",
    "canCancel": true,
    "canReschedule": true,
    "createdAt": "2025-11-30T10:30:00"
  }
}
```

---

## ä¸‰ã€é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ | å¤„ç†å»ºè®® |
|-------|------|---------|
| 0 | æˆåŠŸ | - |
| 98 | HTTPå¼‚å¸¸ï¼ˆ404ç­‰ï¼‰ | æ£€æŸ¥æ¥å£è·¯å¾„æ˜¯å¦æ­£ç¡® |
| 105 | Tokenæ— æ•ˆæˆ–å·²å¤±æ•ˆ | æ¸…é™¤æœ¬åœ°tokenï¼Œè·³è½¬ç™»å½•é¡µ |
| 400 | å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼ |
| 403 | æ— æƒè®¿é—® | æ£€æŸ¥ç”¨æˆ·æƒé™ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

---

## å››ã€æ³¨æ„äº‹é¡¹

å‰ç«¯ä¼šè‡ªåŠ¨å°†åç«¯è¿”å›çš„ä¸‹åˆ’çº¿å‘½åè½¬æ¢ä¸ºé©¼å³°å‘½åï¼š
- `patient_id` â†’ `id`
- `id_card` â†’ `idCard`
- `is_default` â†’ `isDefault`
- `created_at` â†’ `createdAt`

åç«¯è¿”å›å­—æ®µå»ºè®®ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼ˆsnake_caseï¼‰ï¼Œå‰ç«¯ä¼šè‡ªåŠ¨å¤„ç†ã€‚
